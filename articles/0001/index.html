<div id="article">
<h1>Introduction to Apache Ant</h1>
<p id="articlehead">A brief introduction to the features and
capabilities of Apache Ant - the Java build tool.</p>
<h2>Introduction</h2>
<p><b>Apache Ant </b>is currently the most common Java build
scripting tool. Created by <a
	href="http://en.wikipedia.org/wiki/James_Duncan_Davidson">James
Duncan Davidson</a> while working on an open source project (which later
became Apache Tomcat), Ant was developed as a platform neutral build
scripting tool for Java projects. Apache Ant was officially released as
a standalone product in 2000 and is now the most widely used Java build
scripting tool. Lately, <a href="http://maven.apache.org/">Apache
Maven</a> has been developed as an alternative build scripting tool for
Java. Maven introduces significant capability above and beyond Ant,
including an embedded project lifecycle to limit the amount of potential
scripting that is required. However, Ant is still the most widely used
tool, especially in commerical environments and is supported, enhanced
and delivered by vendors such as IBM, BEA and Sun.</p>
<p>In its simplest form, Ant can be used to create and coordinate a
sequence of individual build commands. One of the main benefits of Ant,
is that like Java itself, Ant is platform neutral and therefore an Ant
build script can be executed on any supported Java platform. Ant
implements a simple form of <strong>build avoidance</strong>, in that it
looks at the date/time stamps of individual files, to work out what (if
any) of the files from your complete application it needs to re-build.</p>
<div id="keyconcepts">
<p align="center"><b><u>Key Concepts</u></b></p>
<p><b>project</b> - the application, component or library that is to
be built.</p>
<p><b>target</b> - a part of the composite build process, e.g.
compile source, create distribution archive.</p>
<p><b>task</b> - the set of individual commands or operations that
are executed to build a target, e.g. create a directory, call the java
compiler.</p>
<p><b>dependency</b> - a hierarchical relationship between targets,
if a target has a dependency its dependent target(s) will be executed
first.</p>
</div>
<p>The input to Ant is a textual build script by default called <b>build.xml</b>
(although any filename can be used). A complete application can be built
using one or many build scripts (which are commonly located at different
component/directory levels). Each build script describes a set of <b>targets</b>,
which are the core parts of the composite build process, e.g. compile
source code, test, create a Java archive and so on.</p>
<p>Each of the targets can make reference to any of Ant's built-in <b>tasks</b>.
A task is basically an interface to a Java object written to carry out a
predefined operation, e.g. compile a set of source files, delete a
directory structure and so on. Parameters can be specified for the task,
defining its exact invocation. There are a large number of built-in
tasks (see the <a href="http://ant.apache.org/manual">Ant manual</a> for
details), however since the tasks are interfaces to Java objects, you
can quite easily extend Ant by creating new tasks yourselves.</p>
<p>An example of calling Ant from the command line to execute a
&quot;release&quot; target would be as follows:</p>
<div id="codeoutput">&gt;ant -f atm.xml release<br />
</div>
<p>Here the &quot;-f&quot; option is used to specify the name of the
build script that you wish to use (<strong>atm.xml</strong>) and the
target which will be executed is the &quot;release&quot; target.&nbsp;</p>
<p>One of the most important things to note is that Ant in
itself&nbsp;is not a compiler, rather it invokes your Java compiler
&quot;javac&quot; through its built-in <strong>&lt;javac&gt;</strong>
task. This task, recursively scans source and destination directories to
look for Java classes that need to be (re)built and optimizes calls to
the Java compiler.</p>
<h2>An Example</h2>
<p>An example of an Ant build script to compile a set of Java
classes (for an ATM application) and produce a releasable &quot;<b>.jar</b>&quot;
file is given below:</p>
<pre name="code" class="xml">
&lt;?xml version=&quot;1.0&quot;&gt;

&lt;project name=&quot;atm&quot; default=&quot;compile&quot; basedir=&quot;.&quot;&gt;
    &lt;property name=&quot;dir.src&quot;   value=&quot;src&quot;/&gt;
    &lt;property name=&quot;dir.build&quot; value=&quot;build&quot;/&gt;
    &lt;property name=&quot;dir.dist&quot;  value=&quot;dist&quot;/&gt;
    &lt;property name=&quot;dir.libs&quot;  value=&quot;C:\JavaTools\libs&quot;/&gt;

    &lt;!-- define a classpath to be used throughout the project --&gt;
    &lt;path id=&quot;classpath&quot;&gt;
        &lt;pathelement location=&quot;{$dir.build}/&gt;
        &lt;!-- include third party libraries --&gt;
        &lt;fileset dir=&quot;${dir.libs}&quot;&gt;
            &lt;include name=&quot;*.jar&quot;/&gt;
        &lt;/fileset&gt;
    &lt;/path&gt;

    &lt;!-- initialise directory structure --&gt;&nbsp;
    &lt;target name=&quot;init&quot; description=&quot;initialise directory structure&quot;&gt;
        &lt;mkdir dir=&quot;${dir.build}&quot;/&gt;
        &lt;mkdir dir=&quot;${dir.dist}&quot;/&gt;
    &lt;/target&gt;

    &lt;!-- remove generated files --&gt;
    &lt;target name=&quot;clean&quot; description=&quot;remove generated files&quot;&gt;
        &lt;delete dir=&quot;${dir.build}&quot;/&gt;
        &lt;delete dir=&quot;${dir.dist}&quot;/&gt;
    &lt;/target&gt;

    &lt;!-- compile source code --&gt;
    &lt;target name=&quot;compile&quot; depends=&quot;init&quot; description=&quot;compile source code&quot;&gt;
        &lt;javac destdir=&quot;${dir.build}&quot; &gt;
            &lt;src path=&quot;${dir.src}&quot;/&gt;
            &lt;classpath refid=&quot;classpath&quot;/&gt;
        &lt;/javac&gt;
    &lt;/target&gt;

    &lt;!-- create distribution archive --&gt;
    &lt;target name=&quot;dist&quot; depends=&quot;compile&quot; description=&quot;create distribution archive&quot;&gt;
        &lt;jar jarfile=&quot;${dir.dist}/${ant.project.name}.jar&quot;
            basedir=&quot;${dir.build}&quot;
            includes=&quot;**/*.class&quot;&gt;
        &lt;/target&gt;

&lt;/project&gt;
</pre>
<p>If this build script was used to build the ATM application then
the output result would look similar to the following:</p>
<div id="codeoutput">
<p><b>&gt;ant -f atm.xml clean</b><br />
Buildfile: atm.xml<br />
<br />
clean:<br />
<br />
BUILD SUCCESSFUL<br />
Total time: 0 seconds<br />
<br />
<b>&gt;ant -f atm.xml</b><br />
Buildfile atm.xml<br />
<br />
init:<br />
&nbsp;&nbsp;&nbsp;&nbsp;[mkdir] Created dir:C:\Build\ATM\build<br />
&nbsp;&nbsp;&nbsp;&nbsp;[mkdir] Created dir:C:\Build\ATM\dist<br />
<br />
compile:<br />
&nbsp;&nbsp;&nbsp;&nbsp;[javac] Compiling 4 source files to
C:\Build\ATM\build<br />
<br />
BUILD SUCCESSFUL<br />
Total Time: 4 seconds<br />
</p>
</div>
<p>In this build script a Java archive called <b>atm.jar</b> is
being built. There are four targets: <strong>init</strong>, <strong>clean</strong>,
<strong>compile</strong> and <strong>dist</strong>. Sometimes a target
will have a dependency on another target, for example before you create
a distribution (<strong>.jar</strong>) file, you would need to compile
the source code. These dependencies are easily specified via a <strong>depends</strong>
attribute in the target. You can see this with the <strong>dist</strong>
target on line 40 (where the target requires the <strong>compile</strong>
target to be executed first). Ant will automatically execute any
dependencies.</p>
<p>You will see that on lines 4-7 the script makes reference to <strong>property</strong>
values. In Ant, properties are equivalent to most programming language's
concept of variable constants; that is to say they are immutable and
once properties have been assigned a value they cannot be
changed.&nbsp;Here they are being used to define directory names. You
make references to properties by using the <font face="Courier New">${property_name}</font>
symbols (see line 11 for an example). An interesting feature of
properties is that they can be overridden from the command line. For
example, if you wanted to override the <strong>dir.build</strong>
property, you could use the following:</p>
<div id="codeoutput">
<p><b>&gt;ant -f atm.xml compile -Ddir.build=bin</b></p>
</div>
<p>If you are compiling source code in Java you will need to define
a <strong>classpath.</strong>&nbsp;This is the combination of libraries
containing pre-built classes, that you need to build against. In lines
10-16 a classpath is defined which looks at the <font face="Courier New">build</font>
directory as well as a set of third party <strong>.jar</strong> files
held at the location <font face="Courier New">C:\JavaTools\lib.</font></p>
<p>One final point worthy of note is the use of Ant's built in
variables. In this example, on line 41 we are using the <font
	face="Courier New">${ant.project.name}</font> variable when creating a
jar file, this refers to the project name <strong>atm</strong>&nbsp;as
defined in line 3, so the name of jar file will be <strong>atm.jar</strong>.</p>
<h2>Summary</h2>
<p>This article was intended as a rapid introduction to some of
Ant's capabilities. Ant is a powerful but sometimes complex tool. It is
relatively easy to get started using Ant and there are many tutorials
and examples available on the Internet. However, Ant can become quite
complex for large projects and&nbsp;therefore there are a number of good
practices, such as creating reuseable macros and libraries that can be
implemented to make Ant more practical in such environments. For more
information on how to achieve this, refer to the references given below.</p>
<h2>References</h2>
<ul>
	<li><a href="http://www.lulu.com/content/1022721">Apache Ant -
	The Buildmeister's Guide, Second Edition</a></li>
	<li><a
		href="http://www.amazon.com/gp/product/0321356993?ie=UTF8&amp;tag=thebuildmeist-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0321356993">IBM
	Rational(R) ClearCase(R), Ant, and CruiseControl: The Java(TM)
	Developer's Guide to Accelerating and Automating the Build Process</a><img
		width="1" height="1" border="0"
		src="http://www.assoc-amazon.com/e/ir?t=thebuildmeist-20&amp;l=as2&amp;o=1&amp;a=0321356993"
		alt="" style="border: medium none; margin: 0px;" /></li>
	<li><a
		href="http://www.amazon.com/gp/product/0596006098?ie=UTF8&amp;tag=thebuildmeist-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0596006098">Ant:
	The Definitive Guide, 2nd Edition</a><img width="1" height="1" border="0"
		src="http://www.assoc-amazon.com/e/ir?t=thebuildmeist-20&amp;l=as2&amp;o=1&amp;a=0596006098"
		alt="" style="border-style: none ! important; margin: 0px;" /></li>
	<li><a
		href="http://www.amazon.com/gp/product/193239480X?ie=UTF8&amp;tag=thebuildmeist-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=193239480X">Ant
	in Action</a><img width="1" height="1" border="0"
		src="http://www.assoc-amazon.com/e/ir?t=thebuildmeist-20&amp;l=as2&amp;o=1&amp;a=193239480X"
		alt="" style="border-style: none ! important; margin: 0px;" /></li>
	<li><a
		href="http://www.amazon.com/gp/product/1584502487?ie=UTF8&amp;tag=thebuildmeist-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1584502487">ANT:
	The Java Build Tool In Practice (Programming Series)</a><img width="1"
		height="1" border="0"
		src="http://www.assoc-amazon.com/e/ir?t=thebuildmeist-20&amp;l=as2&amp;o=1&amp;a=1584502487"
		alt="" style="border-style: none ! important; margin: 0px;" /></li>
	<li><a
		href="http://www.amazon.com/gp/product/0672324261?ie=UTF8&amp;tag=thebuildmeist-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0672324261">Ant
	Developer's Handbook</a><img width="1" height="1" border="0"
		src="http://www.assoc-amazon.com/e/ir?t=thebuildmeist-20&amp;l=as2&amp;o=1&amp;a=0672324261"
		alt="" style="border-style: none ! important; margin: 0px;" /></li>
	<li><a href="http://ant.apache.org/">Apache Ant home page</a></li>
	<li><a href="http://ant.apache.org/manual/">The Ant manual</a></li>
	<li><a
		href="http://www.onjava.com/pub/a/onjava/2003/12/17/ant_bestpractices.html">Top
	15 Ant Best Practices</a></li>
	<li><a
		href="http://www.ibm.com/developerworks/rational/library/may06/reader/lee.html">Apache
	Ant Best Practices (Book Excerpt)</a></li>
</ul>
<div>&nbsp;</div>
<div>&nbsp;</div>
</div>

